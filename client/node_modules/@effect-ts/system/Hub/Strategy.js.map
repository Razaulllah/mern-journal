{"version":3,"file":"Strategy.js","mappings":"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","names":["Strategy","unsafeCompletePollers","hub","subscribers","subscription","pollers","keepPolling","isEmpty","poller","poll","MQ","EmptyQueue","subPollerPair","Tp","tuple","remove","add","pollResult","U","unsafeOfferAll","Chunk","prepend_","unsafePollAllQueue","unsafeCompletePromise","unsafeOnHubEmptySpace","unsafeCompleteSubscribers","BackPressure","constructor","Unbounded","handleSurplus","as","isShutdown","T","suspend","_","fiberId","promise","P","unsafeMake","unsafeOffer","get","interrupt","await","succeedWith","unsafeRemove","shutdown","asUnit","do","publishers","forEachPar_","last","interruptAs","unit","isFull","publisher","published","publish","it","Symbol","iterator","curr","next","done","offer","value","filter_","a","Dropping","_hub","_subscribers","_as","_isShutdown","succeed","Sliding","unsafeSlidingPublish","capacity","loop","slide","pub"],"sourceRoot":"","sources":["../_src/Hub/Strategy.ts"],"sourcesContent":[null]}