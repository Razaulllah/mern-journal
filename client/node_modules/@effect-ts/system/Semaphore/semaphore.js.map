{"version":3,"file":"semaphore.js","mappings":"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","names":["Semaphore","constructor","state","loop","bind","restore","releaseN","available","T","map_","get","E","fold","identity","n","acc","_tag","Tp","tuple","right","d","left","dequeue","O","isNone","p","m","q","value","zipLeft_","P","succeed_","undefined","prepend","Error","toRelease","uninterruptible","flatten","chain_","R","modify_","s","unit","fold_","find","a","x","filter","prepare","succeed","Acquisition","make","await","push","ImmutableQueue","L","of","withPermits_","e","bracket_","waitAcquire","release","withPermits","withPermit_","self","withPermit","withPermitsManaged","M","makeReserve","makeReservation_","withPermitManaged","makeSemaphore","permits","makeRef","unsafeMakeSemaphore","unsafeMakeRef"],"sourceRoot":"","sources":["../_src/Semaphore/semaphore.ts"],"sourcesContent":[null]}