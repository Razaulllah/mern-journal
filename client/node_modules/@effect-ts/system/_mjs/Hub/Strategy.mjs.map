{"version":3,"file":"Strategy.mjs","mappings":"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","names":["Chunk","Tp","T","pipe","P","MQ","U","Strategy","unsafeCompletePollers","hub","subscribers","subscription","pollers","keepPolling","isEmpty","poller","poll","EmptyQueue","subPollerPair","tuple","remove","add","pollResult","unsafeOfferAll","prepend_","unsafePollAllQueue","unsafeCompletePromise","unsafeOnHubEmptySpace","unsafeCompleteSubscribers","BackPressure","constructor","Unbounded","handleSurplus","as","isShutdown","suspend","_","fiberId","promise","unsafeMake","unsafeOffer","get","interrupt","await","succeedWith","unsafeRemove","shutdown","asUnit","do","publishers","forEachPar_","last","interruptAs","unit","isFull","publisher","published","publish","it","Symbol","iterator","curr","next","done","offer","value","filter_","a","Dropping","_hub","_subscribers","_as","_isShutdown","succeed","Sliding","unsafeSlidingPublish","capacity","loop","slide","pub"],"sourceRoot":"","sources":["../../_src/Hub/Strategy.ts"],"sourcesContent":[null]}