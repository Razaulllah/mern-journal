{"version":3,"file":"BoundedHubArb.mjs","mappings":"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","names":["Chunk","Hub","Subscription","BoundedHubArb","constructor","requestedCapacity","array","Array","from","length","subscribers","capacity","isEmpty","publisherIndex","subscribersIndex","isFull","publish","a","subscriberCount","index","publishAll","as","asArray","n","size","available","forHub","Math","min","iteratorIndex","publishAllIndex","unsafeGet_","drop_","slide","subscribe","BoundedHubArbSubscription","self","subscriberIndex","unsubscribed","poll","default_","max","pollUpTo","empty","toPoll","builder","pollUpToIndex","append_","unsubscribe"],"sourceRoot":"","sources":["../../../_src/Hub/_internal/BoundedHubArb.ts"],"sourcesContent":[null]}