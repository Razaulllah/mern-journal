{"version":3,"file":"throttleEnforceM.mjs","mappings":"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","names":["CL","Tp","pipe","O","T","M","Ref","Stream","throttleEnforceM","costFn","units","duration","burst","self","throttleEnforceM_","do","proc","toManaged","currentTime","makeRef","tuple","bucket","chunks","go","chain_","chunk","some","weight","current","tokens","timestamp","elapsed","cycles","available","sum","max","Number","MAX_VALUE","Math","min","none","fold","os","succeed","pull"],"sourceRoot":"","sources":["../../../_src/Stream/Stream/throttleEnforceM.ts"],"sourcesContent":[null]}