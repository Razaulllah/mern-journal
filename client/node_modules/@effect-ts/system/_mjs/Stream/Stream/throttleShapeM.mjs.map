{"version":3,"file":"throttleShapeM.mjs","mappings":"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","names":["CL","Tp","pipe","O","T","M","Ref","Stream","throttleShapeM_","self","costFn","units","duration","burst","do","proc","toManaged","currentTime","makeRef","tuple","bucket","chunks","chunk","mapError_","some","current","weight","modify_","tokens","timestamp","elapsed","cycles","available","sum","max","Number","MAX_VALUE","Math","min","remaining","waitCycles","delay","when_","sleep","pull","throttleShapeM"],"sourceRoot":"","sources":["../../../_src/Stream/Stream/throttleShapeM.ts"],"sourcesContent":[null]}