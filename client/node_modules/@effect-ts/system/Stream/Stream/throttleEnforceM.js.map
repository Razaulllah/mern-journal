{"version":3,"file":"throttleEnforceM.js","mappings":";;;;;;;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AAVA;;AAYA;;;;;;;;AAQM,SAAUA,gBAAV,CACJC,MADI,EAEJC,KAFI,EAGJC,QAHI,EAIJC,KAAK,GAAG,CAJJ,EAIK;AAET,SAAcC,IAAP,IACLC,iBAAiB,CAACD,IAAD,EAAOJ,MAAP,EAAeC,KAAf,EAAsBC,QAAtB,EAAgCC,KAAhC,CADnB;AAED;AAED;;;;;;;;AAMM,SAAUE,iBAAV,CACJD,IADI,EAEJJ,MAFI,EAGJC,KAHI,EAIJC,QAJI,EAKJC,KAAK,GAAG,CALJ,EAKK;AAET,SAAO,IAAIG,mBAAJ,CAmDHC,CAAC,KAAD,CA3CAA,CAAC,KAAD,CAHAA,CAAC,MAAD,CADAA,CAAC,MAAD,CADAA,CAAC,MAAD,CADAA,CAAC,CAACC,EACF,EAAO,QAAP,EAAiB,MAAMJ,IAAI,CAACK,IAA5B,CACA,EAAO,aAAP,EAAsB,MAAMC,CAAC,CAACC,SAAF,CAAYC,EAAE,CAACC,WAAf,CAA5B,CACA,EAAO,QAAP,EAAiB,CAAC;AAAEA;AAAF,GAAD,KACfH,CAAC,CAACC,SAAF,CAAYG,GAAG,CAACC,OAAJ,CAAYC,EAAE,CAACC,KAAH,CAAShB,KAAT,EAAgBY,WAAhB,CAAZ,CAAZ,CADF,CAGA,EAAM,MAAN,EAAc,CAAC;AAAEK,UAAF;AAAUC;AAAV,GAAD,KAAuB;AACnC,UAAMC,EAAE,GAIJV,CAAC,CAACW,MAAF,CAASF,MAAT,EAAkBG,KAAD,IAGjBZ,CAAC,OAAD,CADwCA,CAAC,KAAD,CAApBA,CAAC,UAAD,CAAfV,MAAM,CAACsB,KAAD,CAAS,EAAWC,CAAC,CAACC,IAAb,CAAoB,EAAMZ,EAAE,CAACC,WAAT,CACxC,EAAQ,CAAC;AAAEI,WAAK,EAAE,CAACQ,MAAD,EAASC,OAAT;AAAT,KAAD,KAsBJhB,CAAC,OAAD,CAnBAI,GAAG,QAAH,CADAI,MACA,EAAW,CAAC;AAAED,WAAK,EAAE,CAACU,MAAD,EAASC,SAAT;AAAT,KAAD,KAAmC;AAC5C,YAAMC,OAAO,GAAGH,OAAO,GAAGE,SAA1B;AACA,YAAME,MAAM,GAAGD,OAAO,GAAG3B,QAAzB;;AACA,YAAM6B,SAAS,GAAG,CAAC,MAAK;AACtB,cAAMC,GAAG,GAAGL,MAAM,GAAGG,MAAM,GAAG7B,KAA9B;AACA,cAAMgC,GAAG,GAAGhC,KAAK,GAAGE,KAAR,GAAgB,CAAhB,GAAoB+B,MAAM,CAACC,SAA3B,GAAuClC,KAAK,GAAGE,KAA3D;AAEA,eAAO6B,GAAG,GAAG,CAAN,GAAUC,GAAV,GAAgBG,IAAI,CAACC,GAAL,CAASL,GAAT,EAAcC,GAAd,CAAvB;AACD,OALiB,GAAlB;;AAOA,UAAIR,MAAM,IAAIM,SAAd,EAAyB;AACvB,eAAOf,EAAE,CAACC,KAAH,CACLM,CAAC,CAACC,IAAF,CAAOF,KAAP,CADK,EAELN,EAAE,CAACC,KAAH,CAASc,SAAS,GAAGN,MAArB,EAA6BC,OAA7B,CAFK,CAAP;AAID,OALD,MAKO;AACL,eAAOV,EAAE,CAACC,KAAH,CAASM,CAAC,CAACe,IAAX,EAAiBtB,EAAE,CAACC,KAAH,CAASc,SAAT,EAAoBL,OAApB,CAAjB,CAAP;AACD;AACF,KAlBD,CAmBA,EACEH,CAAC,CAACgB,IAAF,CACE,MAAMnB,EADR,EAEGoB,EAAD,IAAQ9B,CAAC,CAAC+B,OAAF,CAAUD,EAAV,CAFV,CADF,CAtBJ,CAHA,CAJJ,CADmC,CAwCnC;;AACA,WAAOpB,EAAP;AACD,GA1CD,CA2CA,EAAM,CAAC;AAAEsB;AAAF,GAAD,KAAcA,IAApB,CAnDG,CAAP;AAsDD","names":["throttleEnforceM","costFn","units","duration","burst","self","throttleEnforceM_","Stream","M","do","proc","T","toManaged","CL","currentTime","Ref","makeRef","Tp","tuple","bucket","chunks","go","chain_","chunk","O","some","weight","current","tokens","timestamp","elapsed","cycles","available","sum","max","Number","MAX_VALUE","Math","min","none","fold","os","succeed","pull"],"sourceRoot":"","sources":["../../_src/Stream/Stream/throttleEnforceM.ts"],"sourcesContent":[null]}